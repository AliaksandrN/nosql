## NYC Flights 2014

Scripts and docs are from the
[_nycflights13_](https://github.com/hadley/nycflights13).
data package containing all out-bound flights in 2014 + useful metdata.

![relational nycflights](images/relational-nycflights.png)

_Source_: G. Grolemund, H. Wickham [R for Data Science](http://r4ds.had.co.nz/relational-data.html)

Skompresowane pobrane dane są zapisane w katalogu **data**,
dokumentacja jest w katalogu *docs*.

## R & MongoDB

* [Getting started with MongoDB in R](https://cran.r-project.org/web/packages/mongolite/vignettes/intro.html)

```{r}
library(mongolite)
```

Import all flights from 2014 and NYC flights from 2014.
```{r}
load("data/flights-2014.rda")
m = mongo(collection = "flights14")
m$insert(flights)

load("data/nycflights14.rda")
mnyc = mongo(collection = "nycflights14")
mnyc$insert(nycflights14)

# check records
m$count()
nrow(flights)
mnyc$count()
nrow(nycflights14)
```

Import weather data for Gdańsk Rębiechowo, Kraków Balice, Warszawa Okęcie.
```{r}
load("data/weather_pl.rda")
m = mongo(collection = "weather_pl")
m$insert(weather_pl)
```

A sample record:
```js
{
  "_id": ObjectId("5851b349e5cc35387b1b3791"),
  "station": "EPGD",
  "year": 2014,
  "month": 1,
  "minute": 0,
  "day": 1,
  "hour": 0,
  "temp": 32,
  "dewp": 32,
  "humid": 100,
  "wind_dir": 180,
  "wind_speed": 9.20624,
  "wind_gust": 10.594356867,
  "precip": 0,
  "visib": 0.5,
  "time_hm": ISODate("2013-12-31T23:00:00Z")
}
```
See _docs/weather_pl.r_ for description of variables/attributes.
